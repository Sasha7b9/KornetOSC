#include "defines.h"
#include "Stack.h"
#include <stdlib.h>


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
template class Stack<uint64>;


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
template <typename T>
Stack<T>::Stack() : buffer(0), size(0U)
{
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
template <typename T>
Stack<T>::~Stack()
{
    free(buffer);
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
template <typename T>
void Stack<T>::Push(T elem)
{
    if(buffer == 0)
    {
        buffer = (T *)malloc(sizeof(T));
        buffer[0] = elem;
        size = 1;
    }
    else
    {
        T *temp = (T *)malloc(sizeof(T) * (size + 1U));
        for(uint i = 0; i < size; i++)
        {
            temp[i] = buffer[i];
        }
        temp[size] = elem;
        size++;
        free(buffer);
        buffer = temp;
    }
}
