#include "Settings.h"
#include "FPGA/FPGA.h"
#include "Hardware/EEPROM.h"
#include "Hardware/AT25160N.h"
#include "Display/Colors.h"


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

static const Settings defaultSettings =
{
/* size                       */   0,
/* crc32                      */   0,

                                    // Меню ДИСПЛЕЙ

/* disp_modeDrawSignal;       */   ModeDrawSignal_Lines,
/* disp_thickness;            */   Thickness_1,
/* disp_background;           */   Background_Black,
/* disp_showStringNavigation; */   ShowStrNavi_Temp,
/* disp_ENumMinMax;           */   ENumMinMax_1,
/* disp_modeAveraging;        */   ModeAveraging_Accurately,
/* disp_ENumAverage;          */   ENumAverage_1,
/* disp_ENumAccum;            */   ENumAccum_1,
/* disp_modeAccumulation;     */   ModeAccumulation_NoReset,
/* disp_ENumSmoothing;        */   ENumSmooth_Disable,
/* disp_ENumSignalsInSec;     */   ENumSignalsInSec_25,
/* disp_typeGrid;             */   TypeGrid_1,
/* disp_brightnessGrid;       */   50,
/* disp_linkingRShift;        */   LinkingRShift_Position,
/* disp_brightness;           */   100,
/* disp_timeShowLevels;       */   5,
/* disp_timeMessages;         */   5,
/* disp_altMarkers;           */   AltMarkers_AutoHide,
/* disp_menuAutoHide;         */   MenuAutoHide_None,
/* disp_shiftInMemory;        */   0,
/* disp_lastAffectedChannel;  */   A

    // Меню КАНАЛ 1, КАНАЛ 2

    // Меню СИНХРОНИЗАЦИЯ

    // Меню РАЗВЁРТКА

    // Меню КУРСОРЫ

    // Меню ИЗМЕРЕНИЯ

    // Меню СЕРВИС

    // Настройки математики

    // Настройки частотомера

    // Настройки тестер-компонента

    // Настройки меню

    // Несбрасываемые настройки калибровки

    /*
    {RShiftZero, RShiftZero},       // chan_shift
    {Range::_500mV, Range::_500mV}, // chan_range
    {ModeCouple_DC, ModeCouple_DC}, // chan_couple
    {true, true},                   // chan_enable
    TrigSource::A,                  // trig_source
    TrigInput::Full,                // trig_input
    TrigPolarity::Rising,           // trig_polarity
    {TrigLevZero, TrigLevZero},     // trig_lev
    ModeTrig::Auto,                 // trig_mode
    RU,                             // serv_lang
    0,                              // time_shift
    TBase::_500us,                  // time_base
    Control_Voltage,                // test_control
    Polarity_Positive,              // test_polarity
    StepU_100mV,                    // test_stepU
    StepI_4mA,                      // test_stepI
    0,                              // test_smooth
    FNP_512,                        // mem__enumPoints
    0,                              // menu_currentPage
    false                           // menu_show
    */
};

Settings set;


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void Settings::Load(bool)
{
    Reset();
    //EEPROM::LoadSettings();
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
void Settings::Save()
{
    //EEPROM::SaveSettings();

    //AT25160N::Save(set);
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
void Settings::Reset()
{
    set = defaultSettings;
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
const char *NameRange(Range range)
{
    static const char *names[Range::Size][NumLanguages] =
    {
        {"2мВ",     "2mV"},
        {"5мВ",     "5mV"},
        {"10мВ",    "10mV"},
        {"20мВ",    "20mV"},
        {"50мВ",    "50mV"},
        {"0.1В",    "0.1V"},
        {"0.2В",    "0.2V"},
        {"0.5В",    "0.5V"},
        {"1В",      "1V"},
        {"2В",      "2V"},
        {"5В",      "5V"},
        {"10В",     "10V"},
        {"20В",     "20V"}
    };

    return names[range][LANG];
};

//----------------------------------------------------------------------------------------------------------------------------------------------------
const char *NameTBase(TBase tBase)
{
    static const char *names[TBase::Size][NumLanguages] =
    {
        {"2нс",     "2ns"},
        {"5нс",     "5ns"},
        {"10нс",    "10ns"},
        {"20нс",    "20ns"},
        {"50нс",    "50ns"},
        {"0.1мкс",  "0.1us"},
        {"0.2мкс",  "0.2us"},
        {"0.5мкс",  "0.5us"},
        {"1мкс",    "1us"},
        {"2мкс",    "2us"},
        {"5мкс",    "5us"},
        {"10мкс",   "10us"},
        {"20мкс",   "20us"},
        {"50мкс",   "50us"},
        {"0.1мс",   "0.1ms"},
        {"0.2мс",   "0.2ms"},
        {"0.5мс",   "0.5ms"},
        {"1мс",     "1ms"},
        {"2мс",     "2ms"},
        {"5мс",     "5ms"},
        {"10мс",    "10ms"},
        {"20мс",    "20ms"},
        {"50мс",    "50ms"},
        {"0.1с",    "0.1s"},
        {"0.2с",    "0.2s"},
        {"0.5с",    "0.5s"},
        {"1с",      "1s"},
        {"2с",      "2s"},
        {"5с",      "5s"},
        {"10с",     "10s"}
    };

    return names[tBase][LANG];
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
float MaxDBforFFT(FFTmaxDB maxDB)
{
    static const float arrayMAX_DB_FOR_FFT[] = {-40.0f, -60.0f, -80.0f};

    return arrayMAX_DB_FOR_FFT[maxDB];
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
void Settings::ResetColors()
{
}
